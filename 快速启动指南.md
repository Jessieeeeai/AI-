# ğŸš€ VideoAI Pro - å¿«é€Ÿå¯åŠ¨æŒ‡å—

## ğŸ¯ ä½ ç°åœ¨æ‹¥æœ‰ä»€ä¹ˆ

âœ… **å®Œæ•´çš„å‰ç«¯ç•Œé¢** - 5æ­¥AIåˆ›ä½œæµç¨‹  
âœ… **å®Œæ•´çš„åç«¯ä»£ç ** - ä»»åŠ¡é˜Ÿåˆ—ã€Workerã€API  
âœ… **å®Œæ•´çš„è§†é¢‘ç”Ÿæˆé€»è¾‘** - TTS + æ•°å­—äºº + åˆå¹¶  
âœ… **æ•°æ®åº“ç»“æ„** - æ”¯æŒåˆ†æ®µã€ç§¯åˆ†ç­‰æ‰€æœ‰åŠŸèƒ½  

## ğŸ“‹ æ¥ä¸‹æ¥è¦åšä»€ä¹ˆ

### é€‰é¡¹Aï¼šç«‹å³éƒ¨ç½²åˆ°GPUï¼ˆæ¨èï¼‰

**ä»Šå¤©å°±èƒ½è·‘èµ·æ¥ï¼**

#### 1. ç§ŸGPUæœåŠ¡å™¨ï¼ˆ30åˆ†é’Ÿï¼‰

**æœ€ç®€å•ï¼šAutoDL**
```bash
# 1. æ‰“å¼€ https://www.autodl.com/
# 2. æ³¨å†Œ â†’ å®åè®¤è¯
# 3. å……å€¼ Â¥100ï¼ˆå¤Ÿç”¨2å¤©æµ‹è¯•ï¼‰
# 4. åˆ›å»ºå®ä¾‹ï¼š
#    - GPU: RTX 3090
#    - é•œåƒ: PyTorch 2.1.0
#    - å­˜å‚¨: 100GB
# 5. å¯åŠ¨å®ä¾‹
```

#### 2. ä¸Šä¼ ä»£ç åˆ°GitHubï¼ˆ5åˆ†é’Ÿï¼‰

```bash
# åœ¨æœ¬åœ°æ‰§è¡Œ
cd /home/user/webapp

# å¦‚æœè¿˜æ²¡å…³è”GitHub
git remote add origin https://github.com/ä½ çš„ç”¨æˆ·å/videoai-pro.git

# æ¨é€ä»£ç 
git push -u origin main
```

#### 3. åœ¨GPUæœåŠ¡å™¨éƒ¨ç½²ï¼ˆ2å°æ—¶ï¼‰

```bash
# SSHè¿æ¥åˆ°GPUæœåŠ¡å™¨
ssh root@ä½ çš„æœåŠ¡å™¨IP

# å…‹éš†é¡¹ç›®
cd /root
git clone https://github.com/ä½ çš„ç”¨æˆ·å/videoai-pro.git
cd videoai-pro

# è¿è¡Œä¸€é”®éƒ¨ç½²è„šæœ¬
chmod +x deploy_gpu.sh
./deploy_gpu.sh
```

éƒ¨ç½²è„šæœ¬ä¼šè‡ªåŠ¨å®‰è£…ï¼š
- âœ… Node.js + Redis
- âœ… IndexTTS2ï¼ˆä½ çš„TTSæ–¹æ¡ˆï¼‰
- âœ… ComfyUI + MuseTalk
- âœ… FFmpeg
- âœ… å¯åŠ¨æ‰€æœ‰æœåŠ¡

#### 4. è®¿é—®ç½‘ç«™ï¼ˆ1åˆ†é’Ÿï¼‰

éƒ¨ç½²å®Œæˆåè®¿é—®ï¼š
```
http://ä½ çš„æœåŠ¡å™¨IP
```

**å°±è¿™ä¹ˆç®€å•ï¼**

---

### é€‰é¡¹Bï¼šæœ¬åœ°æµ‹è¯•ï¼ˆä¸éœ€è¦GPUï¼‰

**å…ˆåœ¨æœ¬åœ°è·‘èµ·æ¥çœ‹æ•ˆæœ**

#### 1. å¯åŠ¨Mockæ¨¡å¼ï¼ˆç«‹å³å¯ç”¨ï¼‰

```bash
cd /home/user/webapp

# ç¡®ä¿Redisåœ¨è¿è¡Œ
# å¦‚æœæ²¡æœ‰å®‰è£…Redisï¼Œå¯ä»¥å…ˆæ³¨é‡Šæ‰é˜Ÿåˆ—åŠŸèƒ½

# å¯åŠ¨æœåŠ¡ï¼ˆMockæ¨¡å¼ï¼‰
npm run dev
```

è®¿é—®ï¼šhttp://localhost:5173

**Mockæ¨¡å¼ä¸‹ï¼š**
- âœ… å¯ä»¥å®Œæ•´ä½“éªŒæµç¨‹
- âœ… TTSä¼šç”Ÿæˆå‡éŸ³é¢‘
- âœ… è§†é¢‘ä¼šå¤åˆ¶æ¨¡æ¿
- âŒ ä¸ä¼šçœŸæ­£ç”Ÿæˆå†…å®¹

**ç”¨é€”ï¼š**
- æµ‹è¯•å‰ç«¯ç•Œé¢
- éªŒè¯ä¸šåŠ¡é€»è¾‘
- æ¼”ç¤ºç»™æŠ•èµ„äºº

---

## ğŸ› ï¸ éƒ¨ç½²è„šæœ¬ï¼ˆæˆ‘å¸®ä½ å†™å¥½äº†ï¼‰

### deploy_gpu.sh - ä¸€é”®éƒ¨ç½²è„šæœ¬

```bash
#!/bin/bash
# VideoAI Pro GPUæœåŠ¡å™¨ä¸€é”®éƒ¨ç½²è„šæœ¬

echo "ğŸš€ å¼€å§‹éƒ¨ç½²VideoAI Pro..."

# 1. æ›´æ–°ç³»ç»Ÿ
echo "ğŸ“¦ æ›´æ–°ç³»ç»Ÿ..."
apt update && apt upgrade -y

# 2. å®‰è£…åŸºç¡€å·¥å…·
echo "ğŸ”§ å®‰è£…åŸºç¡€å·¥å…·..."
apt install -y git curl wget vim htop

# 3. å®‰è£…Node.js 20
echo "ğŸ“— å®‰è£…Node.js..."
curl -fsSL https://deb.nodesource.com/setup_20.x | bash -
apt install -y nodejs

# 4. å®‰è£…Redis
echo "ğŸ’¾ å®‰è£…Redis..."
apt install -y redis-server
systemctl start redis
systemctl enable redis

# 5. å®‰è£…FFmpeg
echo "ğŸ¬ å®‰è£…FFmpeg..."
apt install -y ffmpeg

# 6. å®‰è£…PM2
echo "âš™ï¸  å®‰è£…PM2..."
npm install -g pm2

# 7. å®‰è£…Pythonä¾èµ–
echo "ğŸ å®‰è£…Pythonç¯å¢ƒ..."
apt install -y python3-pip python3-venv

# 8. å…‹éš†IndexTTS2
echo "ğŸ¤ éƒ¨ç½²IndexTTS2..."
cd /root
if [ ! -d "IndexTTS2" ]; then
    git clone https://github.com/Jessieeeeai/IndexTTS2.git
fi
cd IndexTTS2
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
pip install torch torchvision torchaudio --index-url https://download.pytorch.org/whl/cu118

# ä¸‹è½½æ¨¡å‹
python scripts/download_models.py

# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > start.sh << 'EOF'
#!/bin/bash
cd /root/IndexTTS2
source venv/bin/activate
python api_server.py
EOF
chmod +x start.sh

# ç”¨PM2å¯åŠ¨
pm2 start start.sh --name indextts2 --interpreter bash

# 9. å®‰è£…ComfyUI
echo "ğŸ¨ éƒ¨ç½²ComfyUI..."
cd /root
if [ ! -d "ComfyUI" ]; then
    git clone https://github.com/comfyanonymous/ComfyUI.git
fi
cd ComfyUI
python3 -m venv venv
source venv/bin/activate
pip install -r requirements.txt
pip install torch torchvision torchaudio --extra-index-url https://download.pytorch.org/whl/cu118

# åˆ›å»ºå¯åŠ¨è„šæœ¬
cat > start.sh << 'EOF'
#!/bin/bash
cd /root/ComfyUI
source venv/bin/activate
python main.py --listen 0.0.0.0 --port 8188
EOF
chmod +x start.sh

# ç”¨PM2å¯åŠ¨
pm2 start start.sh --name comfyui --interpreter bash

# 10. éƒ¨ç½²VideoAI Proåç«¯
echo "ğŸŒ éƒ¨ç½²VideoAI Pro..."
cd /root/videoai-pro

# å®‰è£…ä¾èµ–
npm install

# åˆ›å»º.envé…ç½®
cat > .env << EOF
PORT=3001
NODE_ENV=production
JWT_SECRET=$(openssl rand -base64 32)
INDEXTTS2_API_URL=http://localhost:5000
COMFYUI_API_URL=http://localhost:8188
REDIS_URL=redis://localhost:6379
EOF

# æ„å»ºå‰ç«¯
npm run build

# å¯åŠ¨æœåŠ¡
pm2 start npm --name videoai -- run start

# ä¿å­˜PM2é…ç½®
pm2 save
pm2 startup

# 11. å®‰è£…Nginx
echo "ğŸŒ é…ç½®Nginx..."
apt install -y nginx

# åˆ›å»ºNginxé…ç½®
cat > /etc/nginx/sites-available/videoai << 'NGINX_EOF'
server {
    listen 80;
    server_name _;
    
    client_max_body_size 100M;
    
    location / {
        root /root/videoai-pro/dist;
        try_files $uri $uri/ /index.html;
    }
    
    location /api {
        proxy_pass http://localhost:3001;
        proxy_http_version 1.1;
        proxy_set_header Upgrade $http_upgrade;
        proxy_set_header Connection 'upgrade';
        proxy_set_header Host $host;
        proxy_cache_bypass $http_upgrade;
    }
    
    location /public {
        alias /root/videoai-pro/public;
        expires 7d;
    }
}
NGINX_EOF

ln -sf /etc/nginx/sites-available/videoai /etc/nginx/sites-enabled/
rm -f /etc/nginx/sites-enabled/default
nginx -t
systemctl restart nginx
systemctl enable nginx

echo "âœ… éƒ¨ç½²å®Œæˆï¼"
echo ""
echo "ğŸ“Š æœåŠ¡çŠ¶æ€ï¼š"
pm2 status
echo ""
echo "ğŸŒ è®¿é—®åœ°å€ï¼š"
echo "http://$(curl -s ifconfig.me)"
echo ""
echo "ğŸ“ æŸ¥çœ‹æ—¥å¿—ï¼š"
echo "pm2 logs"
```

---

## ğŸ“ å¸¸ç”¨å‘½ä»¤

### æŸ¥çœ‹æœåŠ¡çŠ¶æ€
```bash
pm2 status
```

### æŸ¥çœ‹æ—¥å¿—
```bash
# æ‰€æœ‰æœåŠ¡
pm2 logs

# ç‰¹å®šæœåŠ¡
pm2 logs indextts2
pm2 logs comfyui
pm2 logs videoai
```

### é‡å¯æœåŠ¡
```bash
# é‡å¯æ‰€æœ‰
pm2 restart all

# é‡å¯ç‰¹å®šæœåŠ¡
pm2 restart videoai
```

### æŸ¥çœ‹GPUä½¿ç”¨
```bash
nvidia-smi
```

### æŸ¥çœ‹é˜Ÿåˆ—çŠ¶æ€
```bash
redis-cli

# æŸ¥çœ‹é˜Ÿåˆ—é•¿åº¦
LLEN bull:video-generation:waiting
LLEN bull:video-generation:active
```

---

## ğŸ’° æˆæœ¬ä¼°ç®—

### AutoDLï¼ˆå›½å†…ï¼‰
- RTX 3090: Â¥2.5/å°æ—¶
- 24å°æ—¶è¿è¡Œ: Â¥60/å¤© = Â¥1800/æœˆ
- **ä¼˜åŒ–æ–¹æ¡ˆ**: æŒ‰éœ€å¼€æœºå¯çœ50%

### RunPodï¼ˆå›½é™…ï¼‰
- RTX 3090: $0.34/å°æ—¶
- 24å°æ—¶è¿è¡Œ: $8/å¤© = $250/æœˆ

### ä¼˜åŒ–å»ºè®®
1. **æŒ‰éœ€å¯åŠ¨**: æ²¡ä»»åŠ¡æ—¶å…³æœº
2. **å¤œé—´ä½ä»·**: å‡Œæ™¨ä»»åŠ¡æ›´ä¾¿å®œ
3. **é¢„ä»˜è´¹**: å……å€¼æœ‰ä¼˜æƒ 

---

## ğŸ¯ å¿«é€Ÿå†³ç­–

### å¦‚æœä½ æƒ³ï¼š

**1. ä»Šå¤©å°±çœ‹åˆ°æ•ˆæœ**
â†’ é€‰æ‹©**é€‰é¡¹Bæœ¬åœ°Mockæ¨¡å¼**
â†’ 5åˆ†é’Ÿè·‘èµ·æ¥
â†’ çœ‹å®Œæ•´æµç¨‹

**2. æ˜å¤©å¼€å§‹çœŸæ­£ç”Ÿæˆè§†é¢‘**
â†’ é€‰æ‹©**é€‰é¡¹Aéƒ¨ç½²GPU**
â†’ ä»Šå¤©ç§ŸæœåŠ¡å™¨
â†’ ä»Šæ™šéƒ¨ç½²
â†’ æ˜å¤©å°±èƒ½ç”¨

**3. å…ˆæµ‹è¯•å†å†³å®š**
â†’ å…ˆ**Mockæ¨¡å¼**æµ‹è¯•
â†’ æœ‰ç”¨æˆ·å†ç§ŸGPU
â†’ çµæ´»è°ƒæ•´

---

## ğŸ“– è¯¦ç»†æ–‡æ¡£

- **å®Œæ•´éƒ¨ç½²**: çœ‹ `GPUå®Œæ•´æ–¹æ¡ˆ.md`
- **å®æ–½è®¡åˆ’**: çœ‹ `å®æ–½è®¡åˆ’.md`
- **åŠŸèƒ½è¯´æ˜**: çœ‹ `å®ŒæˆæŠ¥å‘Š.md`

---

## ğŸ†˜ éœ€è¦å¸®åŠ©

**ç«‹å³å¯ä»¥å¸®ä½ ï¼š**
1. âœ… ç§ŸGPUæœåŠ¡å™¨ï¼ˆæŒ‡å¯¼ï¼‰
2. âœ… å†™éƒ¨ç½²è„šæœ¬ï¼ˆå·²å†™å¥½ï¼‰
3. âœ… è°ƒè¯•é—®é¢˜ï¼ˆè¿œç¨‹ï¼‰
4. âœ… ä¼˜åŒ–æ€§èƒ½ï¼ˆå»ºè®®ï¼‰

éšæ—¶å‘Šè¯‰æˆ‘éœ€è¦ä»€ä¹ˆï¼ğŸ’ª

---

**æœ€ç®€å•çš„å¼€å§‹ï¼š**
```bash
# 1. ç°åœ¨å°±è¯•è¯•Mockæ¨¡å¼
npm run dev

# 2. æ‰“å¼€æµè§ˆå™¨
# http://localhost:5173

# 3. æ³¨å†Œè´¦å·
# 4. å®Œæ•´ä½“éªŒ5æ­¥æµç¨‹
# 5. å†³å®šæ˜¯å¦ç§ŸGPU
```

å°±è¿™ä¹ˆç®€å•ï¼ğŸš€
